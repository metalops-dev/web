---
/**
 * Optimized Image Component
 * Wraps Astro's Image component with consistent defaults
 * Automatically handles WebP conversion and responsive sizing
 */
import { Image } from "astro:assets";

interface Props {
	src: ImageMetadata;
	alt: string;
	width?: number;
	height?: number;
	class?: string;
	loading?: "lazy" | "eager";
	decoding?: "async" | "auto" | "sync";
	quality?: number;
	format?: "webp" | "avif" | "png" | "jpeg";
	widths?: number[];
	sizes?: string;
}

const {
	src,
	alt,
	width,
	height,
	class: className = "",
	loading = "lazy",
	decoding = "async",
	quality = 80,
	format = "webp",
	widths = [400, 800, 1200],
	sizes = "(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 800px",
} = Astro.props;
---

<Image
	src={src}
	alt={alt}
	width={width}
	height={height}
	class={className}
	loading={loading}
	decoding={decoding}
	quality={quality}
	format={format}
	widths={widths}
	sizes={sizes}
/>

<style>
	:global(img) {
		max-width: 100%;
		height: auto;
	}
</style>
